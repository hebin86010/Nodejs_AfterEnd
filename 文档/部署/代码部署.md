# 代码部署
## 一、 上传代码
![code_00001](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_00001.png)
上传文件：LICENSE、 package.json、yanr.lock; <br\>
上传文件夹：src
![code_00002](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_00002.png)
### 特别注意：不要上传本地电脑上的文件夹【node_modules】
## 二、 安装依赖
1. 进入终端
![code_00003](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_00003.png)
2. 在项目根目录下运行yarn，系统自动安装依赖 <br/>
![code_00004](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_00004.png)
### 特别注意：如果Node服务器不能启动，建议删除package.json中向上的尖括号： ^  <br/>
原因：服务器在安装依赖时，版本过高了；package.json中: ~ 和 ^ 的:<br/>
1）' ~ ' ：指定版本：比如  "core-js": "~3.6.5", 表示安装3.6.x的最新版本（不低于3.6.5），但是不安装3.7.x，也就是说安装时不改变大版本号和次要版本号;<br/>
2）' ^ '：指定版本：比如 "antd": "^3.1.4",表示安装3.1.4及以上的版本，但是不安装4.0.0，也就是说安装时不改变大版本号。

## 三、 配置网站
1. 添加网站
![web_01](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/web_01.png)
2. 添加Node.js监听的端口
![code_0001](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_0001.png)
<br/>这个端口要与，node.js的入口文件【src/index.js】中的端口一致:<br/>
![code_001](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_001.png)
3. 放行Node.js监听的端口
![web_06](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/web_06.png)
4. 配置pm2
![code_01](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_01.png)
![code_02](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_02.png)
![code_03](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_03.png)

## 四、 测试网站
1. 运行接口测试<br/>
![code_04](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_04.png)
2. 查看数据库 <br/>
![code_05](https://github.com/hebin86010/Nodejs_AfterEnd/blob/main/%E6%96%87%E6%A1%A3/%E9%83%A8%E7%BD%B2/%E6%88%AA%E5%9B%BE/code_05.png)
